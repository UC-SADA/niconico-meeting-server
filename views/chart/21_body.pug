canvas#myLineChart(style='position: relative')
script(type='text/javascript').
  var c=document.getElementById("myChart");
  //c.width=window.innerWidth*0.1;
  c.height=window.innerHeight;
  var socket = io.connect();
  socket.emit("client_to_server_join", "#{room}");
  socket.on('chart', function(cnt){
    chartDraw_Bar("myChart",cnt)
  });
  function chartDraw_Line(mychart,data){
    var myLineChart = new Chart(document.getElementById(mychart), {
      type: "line",
    data: {
      labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
      datasets: [
        data["total"],data["00_Good"],data["01_kyoshu"],data["02_maki_1"],data["03_maru"],data["04_batsu"]
      ],
    },
      options: {
        animation : false,
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          yAxes: [{
            ticks: {
              suggestedMax: Math.max.apply(null, data["total"])*1.2+1,
              suggestedMin: 0,
              stepSize: 10,
              fontSize: 30,
            }
          }]
        },
        legend: {
          position: 'bottom'
        }
    }})
  }
  function chartDraw_Bar(mychart,data){
    var mybarChart = new Chart(document.getElementById(mychart), {
      type: "bar",
      data: {
        labels : ["いいね数"],
        datasets : [
          { label: "いいね！", data: [data[0]], backgroundColor: "rgba(244, 143, 177, 0.6)" },
          { label: "ぶーぶー！", data: [data[1]], backgroundColor: "rgba(255, 235, 59, 0.6)" },
          { label: "巻きで！", data: [data[2]], backgroundColor: "rgba(100, 181, 246, 0.6)" },
          { label: "わからん？", data: [data[3]], backgroundColor: "rgba(50, 81, 246, 0.6)" }
        ]
      },
      options: {
        animation : false,
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          yAxes: [{
            ticks: {
              suggestedMax: Math.max.apply(null, data)*1.2,
              suggestedMin: 0,
              stepSize: 10,
            }
          }]
        }
    }})
  }
